<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="">
<meta name="dcterms.date" content="2023-12-07">

<title>◀◀◀ - Capitalism, Alone</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">◀◀◀</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">？</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/mikaelsakari" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://instagram.com/mikaelhernesniemi" rel="" target=""><i class="bi bi-instagram" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mikaelsakari" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Capitalism, Alone</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Arvostelu</div>
                <div class="quarto-category">Eriarvoisuus</div>
                <div class="quarto-category">Kapitalismi</div>
                <div class="quarto-category">Kirja</div>
                <div class="quarto-category">Milanovic</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 7, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/capitalism-01.jpg" class="img-fluid figure-img" width="271"></p>
</figure>
</div>
<p>Branko Milanovic on taloustieteilijä, joka tunnetaan globaalia tuloeroja koskevasta työstään. Hänen teoksiaan ovat muun muassa <em>“Global Inequality: A New Approach for the Age of Globalization”</em>, joka oli vuonna 2016 ilmestynyt kansantajuinen teos globaalista epätasa-arvosta, ja uusin kirja <em>“Visions of Inequality”</em> ilmestyi äskettäin. Kirjoissaan Milanovic tutkii tulonjaon ja talousjärjestelmien dynamiikkaa globaalissa mittakaavassa.</p>
<p>Kirjan otsikko on itsessään kiinnostava, jopa hätkähdyttävä. Siinä on politiikan tutkija Francis Fukuyaman henkeä “historian lopusta”, liberaalidemokratian voittokulusta, ja samankaltaista ajatusta Milanovic tarjoaa nyt kapitaliselle järjestelmälle. Toisin kuin liberaalidemokratia, niin kapitalismi on järjestelmänä levittäytynyt maapallon jokaiseen kolkkaan, eikä sille ole enää varteenotettavaa kilpailijaa. MIlanovicin analyysi ei kuitenkaan ole suoraviivainen, vaan monin paikoin vivahteikas näkökulma maailmassa toimivaan kapitalistiseen järjestelmään.</p>
<p>Vaihtoehtoisten talousjärjestelmien puuttuessa, kilpailijat Milanovic löytää kapitalistisen järjestelmän sisältä, jotka hän jakaa länsimaiden edustamaan liberaaliin meritokraattiseen kapitalismiin sekä Kiinasta ja monesta muusta autokraattisista maista löytyvään poliittiseen kapitalismiin. Myös näillä järjestelmillä on historialliset juurensa. Nykyinen länsimainen meritokraattinen kapitalismi ei ole samanlaista kapitalismia kuin esimerkiksi Iso-Britannian klassinen kapitalismi sata vuotta sitten tai toisen maailman sodan jälkeen Länsi-Euroopassa ja Yhdysvalloissa noussut sosiaalidemokraattinen kapitalismi. Tämän päivän poliittinen kapitalismi syntyi taas Kiinassa Deng Xiaopingin aikana ratkaisuna kommunistisen talouden tehottomuuteen.</p>
<p>Milanovic pohtii kirjassa liberaalin meritokraattisen kapitalismin ja poliittisen kapitalismin tulevaisuutta, jota määrittelee maiden (ja molempien yhteiskuntajärjestelmien) sisällä kasvava eriarvoisuuskehitys. Tämä valtava eriarvoisuuden kehitys voi johtaa epävakauteen molempien yhteiskuntatyyppien maissa. Milanovic ei vain tyydy toteamaan haasteita, vaan pyrkii myös tarjoamaan ratkaisuja eriarvoisuuskehityksen lieventämiseksi.</p>
<p>Eräs kirjan mielenkiintoisinta antia on Milanovicin analyysi eriarvoisuuden kehityksestä länsimaissa. Hän esittää kuuden kohdan analyysin tulonjaon ja vaurauden keskittymisen syvävirtauksista (s. 23–42). Ensinnäkin (1) omistajien ja työntekijöiden välinen kuilu levenee, kun omistajien varallisuus kasvaa suhteessa työntekijöihin. Omistajat kasvattavat taloudellista ja poliittista vaikutusvaltaa investoimalla poliittisen kontrollin saamiseen ja sen säilyttämiseen. Toiseksi (2), varallisuus on erittäin keskittynyttä. Yhdysvalloissa rikkain 10 % omistaa lähes kaiken omistamisen arvoisen rahoitusvarallisuuden. Kolmanneksi (3), rikkaimmilla omaisuuden tuottoaste on korkeampi. Mitä rikkaampi henkilö on, sitä enemmän ja hajautetummin hänellä on erilaisia rahoitusinstrumentteja kuin muilla. Neljänneksi (4), homoploutia, eli korkean pääoma- ja työtulon yhteys samoilla henkilöillä. Toisin kuin 1800-luvun pääomatuotoillaan elävä luokka, niin nykyään suuria pääomatuloja saavat ovat taipuvaisia saamaan myös korkeita palkkatuloja. Yhdysvalloissa lähes 30 % niistä kotitalouksista, jotka pääomatulojen osalta kuuluvat ylimpään desiilin, saavat myös ansiotuloja, joilla päästään kaikista rikkaimpaan desiiliin. Määrä on kaksinkertaistunut vuodesta 1980. Viidenneksi (5), homogamia, valikoiva pariutuminen. Milanovicin mukaan yksi varallisuuseroja eniten määrittäviä tekijöitä on homogamia, eli puoliso valitaan yhä useammin samasta sosioekonomisesta viiteryhmästä. Kuudenneksi (6), varallisuuden hyödyt elintason, terveyden ja koulutuksen osalta siirtyvät sukupolvelta toiselle. Vanhempien ja lasten tulotasoissa on vahva korrelaatio.</p>
<p>Milanovic pitää nykyisen kaltaista järjestelmää mahdottomana ylläpitää, ellei eriarvoisuuskehitystä pysäytetä. &nbsp;Tämän vuoksi Milanovic pohtii kirjassa sosiaalipoliittisia ratkaisuja. Kansallisissa päätöksissä tulontasauksen osalta on yleisesti vannottu verotuksen nimeen, mutta Milanovicin mukaan sillä on vain rajallinen vaikutus—taloudellinen eriarvoisuus on kasvanut siitä huolimatta (s. 44–46). Milanovicin mukaan olisi puututtava eriarvoisuutta lisääviin juurisyihin, joka tarkoittaisi sitä, että keskiluokkaa kannustettaisiin sijoittamaan hajautetummin kuin vain asuntoihin, lisäämällä työntekijöiden mahdollisuuksia yrityksen osakeomistuksiin, ottamalla perintö- ja varallisuusverot käyttöön ja tasoittamalla koulutuksen laatua yhteiskunnassa (s. 47–50).</p>
<p>Milanovicin ajatus eriarvoisuuden kehityksestä liberaalissa meritokraattisessa kapitalismissa on vakuuttava. On vaikea suoranaisesti keksiä, mitä eriarvoisuuden kehitykselle voi tehdä, ettei yhteiskunta ajaudu rikkaiden valtaan. Ilmiselvästi verotus ei ole lopullinen vastaus. Sillä ei vaikuteta esimerkiksi homogamiaan. Suomessa on viime aikoina pyritty edistämään “kansankapitalismia” esimerkiksi luomalla osakesäästötilejä, jota on pohdittu jopa osaksi äitiyspakkausta. On kuitenkin epävarmaa, kuinka tämän kaltaiset toimet vähentävät eriarvoisuutta, kehitys voi olla jopa päinvastainen.</p>
<section id="poliittinen-kapitalismi" class="level3">
<h3 class="anchored" data-anchor-id="poliittinen-kapitalismi">Poliittinen kapitalismi</h3>
<p>Kirjan toinen osuus käsittelee poliittista kapitalismia, joka on Milanivicin mukaan kommunististen vallankumouksien historiallinen tuote. Useat tämän järjestelmän maista, kuten Kiina, Singapore, Vietnam ja Malesia, ovat hänen mukaansa onnistuneet luomaan erittäin tehokkaan teknokraattisen ja asiantuntevan byrokratian, joka on mahdollistanut maiden korkean talouskasvun. Järjestelmä kuitenkin nojaa harvainvaltaan, heikkoon oikeusvaltioon ja systeemiseen korruptioon (s. 91–96).</p>
<p>Poliittisen kapitalismin sisällä myös kasvaa taloudellinen eriarvoisuus, ja kirjassa Milanovic tarkastelee tapauskohtaisesti Kiinaa. Hän analysoi monipuolisesti eriarvoisuustutkimuksia, joita on tehty Kiinan osalta esittäen niistä luotettavimmat metodologiset lähestymistavat. Kiinassa taloudellisen eriarvoisuuden kasvun taustalla on valtavan nopea talouskasvu. Taloudellinen eriarvoisuus on kasvanut räjähdysmäisesti, jopa 20 gini-pistettä noin 30 vuodessa. Samaan aikaan Yhdysvalloissa eriarvoisuus kasvoi neljä gini-pistettä (s. 98-103).</p>
<p>Milanovic pohtii myös poliittisen kapitalismin houkuttelevuutta, niin Kiinan sisällä kuin vientituotteena. Vaikka kapitalistinen luokka on saanut jalansijaa Kiinassa, on tietenkin arvailujen varassa, kuinka suuri vaikutusvalta sillä on valtion tasolla. Milanovicin mukaan Kiinan hallinto on avulias porvaristojen etujen suojelemiseen, vain jos ne eivät ole vastakkaisia hallinnon pyrkimyksille (s. 116). Länsimaisen omistusoikeuden näkökulmasta Kiinassa sääntöjä sovelletaan mielivaltaisesti, omistusjärjestelyt ovat epäselviä, eivätkä lait ole tasapuolisia kaikille, mutta Milanovicin mukaan se on juuri se ympäristö, jossa poliittinen kapitalismi elää ja voi kukoistaa. Tässä voidaan kuitenkin havaita poliittisen kapitalismin institutionaalisen noidankehän, jossa pienet eliittiryhmittymät suojelevat etujaan ja hyötyvät kansalaisten kustannuksella. Milanovicin pitää mahdollisena, ettei kasvava kapitalistinen luokka lopulta tyydy tällaiseen, vaan alkaa vaatimaan demokraattisia muutoksia. Todennäköisempänä hän kuitenkin pitää skenaariota, että valtion ja liike-elämän epäsymmetrinen liitto jatkuu, kuten se on jatkunut vuosituhansien ajan.</p>
<p>Milanovicin mukaan poliittisen kapitalismin hyödyt suoraviivaisena päätöksentekoprosessina, jossa voidaan unohtaa joidenkin ihmisten oikeudet, voivat olla houkutteleva vaihtoehto myös niiden kansalaisten mielestä, ellei se loukkaa heidän etujaan. Milanovicin mukaan kansalaisten todellinen halu osallistua päätöksentekoprosesseihin on myös kyseenalaista. Hän epäilee, ettei Kiinan valtavat infrastruktuuriprojektit olisi onnistuneet yhtä nopeasti demokraattisissa maissa, koska kansalaisten mielipiteen kuulemiseen olisi kulunut aikaa. Milanovicin mielestä on mahdollista myös, että yhteiskunnan sisäinen korruptiota siedetään, koska se helpottaa myös monien kansalaisten elämää, jotka ovat tottuneet siihen, että keskinäisiä palveluksia vaihdetaan. Kiinan puolivuosisataa kestänyt nopea talouskasvu, kyky eristää politiikka taloudesta, hallitsijoiden autonomia ja toteuttaa yhteiskunnallisia tuloksia erilaisin projektein, voi Milanovicin mielestä houkutella Kiinaa viemään omaa yhteiskuntajärjestelmää muihin maihin tai tulla jopa muiden maiden jäljittelemäksi (s. 118–125).</p>
<p>Milanovicin ajatusta poliittisesta kapitalismista voi pitää sangen stereotyyppisenä. Tehokkuus ei saisi olla ainoa arviointikriteeri päätöksentekojärjestelmälle, vaan myös demokratian periaatteita, oikeusvaltioperiaatetta ja ihmisoikeuksien kunnioittamista tulisi pitää keskeisinä. Kiinan sisäisen korruption sietäminen ei välttämättä ole merkki siitä, että kansalaiset hyväksyvät sen, vaan pikemminkin se voi johtua puutteellisista mahdollisuuksista ilmaista vastustustaan ilman pelkoa seuraamuksista. Kiinan talouskasvu johtuu pitkälti valtavasta takamatkasta verrattuna vanhoihin teollisuusmaihin, ja siirtyminen kapitalistiseen järjestelmään ja osallistuminen maailmankauppaan on sitä hyödyttänyt. On kuitenkin hyvin epävarmaa, kuinka pitkään Kiinan ekstraktiiviset instituutiot (Acemoglu &amp; Robinson 2012) tuottavat kasvua ja hyvinvointia. Jo nyt on näkyvissä hidastuvaa talouskasvua, joka voi tuottaa Kiinalle yhteiskunnallisia levottomuuksia.</p>
</section>
<section id="kapitalismi-ja-globalisaatio" class="level3">
<h3 class="anchored" data-anchor-id="kapitalismi-ja-globalisaatio">Kapitalismi ja globalisaatio</h3>
<p>Kirjan kaksi viimeistä lukua Milanovic omistaa kapitalismin ja globalisaation vuorovaikutukselle ja järjestelmän tulevaisuudelle. Lukujen mielenkiintoisinta antia on Milanovicin pohdinta muuttoliikkeestä. Taloustieteessä on vakaa konsensus, että köyhyys johtuu pitkälti siitä, että ihmiset sattuvat syntymään köyhään maahan. Ihmiset ovat eriarvoisessa asemassa kansalaisuuden perusteella, joten työperäisen maahanmuuton esteiden poistaminen lisää tuottavuutta ja hyvinvointia. Tämän Milanovic myöntää, mutta hänen mukaansa on myös tunnustettava, että muuttoliike häiritsee tavalla tai toisella isoa osaa alkuperäisväestöä. Milanovicin mukaan “kansalaisuuspalkkio”, joka rikkaissa maissa toteutuu erilaisin hyvinvointijärjestelmin, tulonsiirroin ja vakaiden instituutioiden muodossa, pienenee maahan saapuvan muuttoliikkeen seurauksena. Tämän vuoksi maiden olisi hyväksyttävä se, ettei tilapäisillä maahanmuuttajilla olisi samanlaista pääsyä hyvinvointijärjestelmiin kuin alkuperäisväestöllä (s. 131–147). Onko se pragmaattista, vaiko sittenkin ristiriitaista ajattelua, että eriarvoisuustutkija ehdottaa eriarvoisten käytäntöjen toimeenpanoa? Monelle maalle, kuten Suomelle, “kansalaisuuspalkkio” voisi olla houkutteleva “tuote”, jopa elinehto, jotta maahan saataisiin ulkomaista työvoimaa. Suomessa maahanmuutto voi auttaa ratkaisemaan väestön ikääntymiseen ja väestörakenteen muutoksiin liittyviä haasteita. On toki välttämätöntä toteuttaa politiikkatoimia, jotka hallitusti integroivat maahanmuuttajat yhteiskuntaan ja työmarkkinoille ilman, että tämä heikentää alkuperäisväestön hyvinvointia.</p>
<p>Milanovicin kapitalismin tulevaisuudesta on sangen pessimistinen, vaikka näkee järjestelmässä positiivisia puolia hyvinvoinnin ja tehokkuuden tuottamisen saralla. Hierarkian määrittyminen varallisuuden perusteella johtaa siihen, että ihmiset keskittyvät hankkimaan varallisuutta (s. 177). Jatkamalla nykyistä kehitystä, se tulee johtamaan eriarvoisuuden kasvuun, moraalin heikkenemiseen ja rikkaiden valta-asemaan molemmissa järjestelmissä, jotka voivat säätää politiikkatoimia omiksi edukseen (s. 196–197). Milanovicin mukaan kapitalismi on yhä atomisoituneempi ja ottanut yhä enemmän ottanut valta-asemaa ihmisten yksityisestä tilasta. Tämä on mielenkiintoinen näkökulma, joka varmasti jossain määrin pitää paikkansa. Itselleni tuli mieleen esimerkiksi Airbnb’n kaltaiset yritykset ovat mahdollistaneet kotien/huoneiden vuokraamisen, joita aikaisemmin on pidetty hyvin yksityisenä ja henkilökohtaisena tilana. Vaikka eriarvoisuuden kasvu näyttää uhkaavalta, niin mahdollisuuksiakin on Milanovicin mukaan muitakin, jos tarvittavia politiikkatoimia tehdään (s. 215–218).</p>
<p>Kokonaisuudessaan Milanovicin kirja oli erinomainen katsaus maailmassa vaikuttavaan kapitalistiseen järjestelmään ja sen sisällä kilpaileviin muotoihin: liberaaliin meritokraattiseen kapitalismiin ja poliittiseen kapitalismiin. Se antaa lukijalle pohdittavaa, mitä eriarvoisuuden kehitykselle lopulta voi tehdä. Milanovicilla on melko radikaalejakin ajatuksia politiikkatoimista, jotka ainakin itselleni tuntuvat ristiriitaiselta. Epäselvää on, kuinka ne lopulta vähentäisivät eriarvoisuutta. Kirja on kuitenkin mielestäni jopa pakollista luettavaa taloudellisesta eriarvoisuudesta kiinnostuneelle opiskelijalle tai tutkijalle.</p>
<p><strong>Branko Milanovic (2019). Capitalism, Alone. The Future of the system that rules the world. London: Harvard University Press.</strong></p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">Mikael Hernesniemi 2023</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>