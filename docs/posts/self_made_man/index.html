<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="">
<meta name="dcterms.date" content="2021-04-04">

<title>◀◀◀ - Ilman turvaverkkoa onnenonkijoiden mahdollisuudet menestyä kapenevat</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">◀◀◀</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../databank.html" rel="" target="">
 <span class="menu-text">databank.html</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">？</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/mikaelsakari" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://instagram.com/mikaelhernesniemi" rel="" target=""><i class="bi bi-instagram" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mikaelsakari" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Ilman turvaverkkoa onnenonkijoiden mahdollisuudet menestyä kapenevat</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Analyysi</div>
                <div class="quarto-category">Eriarvoisuus</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 4, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/louisville_flood_1937.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Afrikanamerikkalaisia tulvan uhreja jonottamassa ruokaa ja vaatteita Punaisen Ristin asemalla vuonna 1937.</figcaption>
</figure>
</div>
<p>Yhdysvaltojen perustajaisä Benjamin Franklinin omaelämänkerrallinen teos *The Autobiography of Benjamin Franklin* julkaistiin englanniksi vuonna 1793 pari vuotta hänen kuolemansa jälkeen. Kirjasta tuli jättimenestys ja sitä pidetään yhtenä vaikutusvaltaisimpana omaelämänkerrallisena teoksena. Benjamin Franklinin nousu köyhyydestä mittaamattomaan varallisuuteen loi esimerkillisen pohjan seuraavina vuosisatoina julkaistaviin erilaisiin menestyskirjallisiin tuotoksiin, laulujen aiheisiin ja Hollywood-elokuviin, jotka levisivät laajalti Yhdysvalloissa ja myös maan ulkopuolella. Kaikkien haavekuvissa oli olla seuraava Franklinin kaltainen self-made man, joka vaatimattomista oloista lähteneenä lopulta saavuttaisi ahkeruudellaan ja omilla ansioillaan merkittävän varallisuuden ja korkean aseman.</p>
<p>Yhdysvalloissa self-made man -myyttiä pidetään ainutlaatuisena kansallisena luomuksena, amerikkalaisena keksintönä. Professori Heike Paul kertoo *The Myths That Made America* -kirjassaan myytin olevan utopistinen visio tasa-arvoisesta yhteiskunnasta, jossa sosiaalinen mobiliteetti on suurta. Siinä ilmenee individualistinen ja sosiaalidarwinistinen logiikka, jonka mukaan jokainen on vastuussa itsestään ja kollektiivinen vastuu yksittäisen kansalaisen hyvinvoinnista on vähäistä. 1700-luvulta lähtien Amerikkaa mainostettiin maallisena paratiisina, missä jokaisella oli yhdenvertaiset mahdollisuudet nousta ryysyistä rikkauksiin. Ajatus kirjailtiin niin ikään Yhdysvaltojen itsenäisyysjulistukseen, jonka tekstiä myös Benjamin Franklin oli muotoilemassa. Sen mukaan kaikki ihmiset oli luotu tasa-arvoisiksi ja heillä oli luovuttamaton oikeus elämään, vapauteen ja onnen tavoitteluun. Amerikan uudenlainen utopia oli valtava houkutus Euroopan ihmisille, jotka olivat mantereellaan köyhyyteen kahlittuina sääty-yhteiskuntien, uskontojen ja kuninkaiden ikeen alle. Vuosisatojen ajan aina näihin päiviin saakka miljoonat siirtolaiset, myös suomalaiset, olivat pyrkineet löytämään sateenkaaren pään juuri Amerikan yhdysvalloista.</p>
<p>Myytti tuli mieleeni, kun seurasin sosiaalisessa mediassa keskustelua nettoveronmaksajuudesta eli siitä, että on maksanut enemmän veroja kuin mitä on saanut elämänsä aikana tulonsiirtoina. Eräille se oli kaikessa ylimielisyydessään ja huvittavuudessaan kuin suomalainen versio amerikkalaisesta self-made manista. Heille nousu suomalaiseksi nettoveronmaksajaksi näyttäytyy oman ahkeruuden ja ansioiden tuloksena ja nettoveronsaajat vain liian laiskoina ja osaamattomina. Heidän ilmeisten olemassa olevien taitojen lisäksi tähän yhtälöön ei heille sovi lisäarvo, jonka he ovat saaneet valtion maksaman koulutuksen, terveydenhuollon, tie- ja rautatieverkoston ja turvallisuuden myötä, eikä ne onnelliset sattumukset, jotka he ovat vanhemmiltaan saaneet syntymäpaikkana ja rahallisena tai geenien perintönä---monista muista elämän suunnittelemattomista sattumuksista nyt puhumattakaan.</p>
<p>Yhdysvalloissa onnenonkijat ovat saaneet yhä useammin pettyä self-made man -unelmaan. Vuoden 2020 *The Global Social Mobility Index* jättää Yhdysvaltojen sosiaalisessa mobiliteetissa korkean tulotason maista keskimääräistä alimmalle sijalle. Varallisuuserojen myötä materiaalinen menestys jää yhä useammalta saavuttamatta, luokkarajoja on entistä vaikeampaa ylittää, eikä epäonnen sattuessa kunnon turvaverkkoa ole---kuten Covid-19 -kriisi on monelle yhdysvaltalaiselle karmivalla tavalla osoittanut. Ekonomisti Branko Milanović on esittänyt erinomaisessa *Capitalism, Alone* -kirjassaan vanhojen teollisuusmaiden, erityisesti Yhdysvaltojen, varallisuuserojen johtuvan kuudesta seikasta.</p>
<ol type="1">
<li><p>Omistajien ja työntekijöiden välinen kuilu levenee, kun omistajien varallisuus kasvaa suhteessa työntekijöihin. Omistajat kasvattavat taloudellista ja poliittista vaikutusvaltaa investoimalla poliittisen kontrollin saamiseen ja sen säilyttämiseen.</p></li>
<li><p>Varallisuus on erittäin keskittynyttä. Yhdysvalloissa rikkain 10% omistaa lähes kaiken omistamisen arvoisen rahoitusvarallisuuden.</p></li>
<li><p>Mitä rikkaampi henkilö on, sitä enemmän ja hajautetummin hänellä on erilaisia omistuksia: osakkeita, kiinteistöjä ja muita rahoitusinstrumentteja.</p></li>
<li><p>Toisin kuin 1800-luvun tuotoillaan elävä omistava luokka, niin nykyään suuria pääomatuloja saavat eivät lepäile vain laakereillaan, vaan ovat taipuvaisia saamaan myös korkeita palkkatuloja. Yhdysvalloissa lähes 30% niistä kotitalouksista, jotka pääomatulojen osalta kuuluvat ylimpään desiilin, saavat myös ansiotuloja, joilla päästään kaikista rikkaimpaan desiiliin. Määrä on kaksinkertaistunut vuodesta 1980.</p></li>
<li><p>Yksi varallisuuseroja eniten määrittäviä tekijöitä on homogamia, eli puoliso valitaan yhä useammin samasta sosioekonomisesta viiteryhmästä.</p></li>
<li><p>Varallisuuden hyödyt elintason, terveyden ja koulutuksen osalta siirtyvät sukupolvelta toiselle. Vanhempien ja lasten tulotasoissa on vahva korrelaatio.</p></li>
</ol>
<p>Ei pidä ymmärtää väärin. Edellä mainitut seikat sisältävät erittäin positiivisia historiallisia kehityskulkuja. Ranskan vallankumouksen jälkeen kansoja alistavat kuninkaat, uskonnot ja lopulta myös sääty-yhteiskunta koki perusteellisia tappioita ja kansallisvaltioita alettiin rakentamaan vapauksien ja tasa-arvon varaan. Läntinen maailma on nyt paljon tasa-arvoisempi kuin 1800-luvun klassisen kapitalismin kulta-aikaan: naiset ovat työmarkkinoilla, omistava luokka ei elä ainoastaan pääomatuloillaan, rikkauksiin voi päästä palkkatyöllä, puolisoksi valitaan samankaltaisessa elämäntilanteessa oleva henkilö ja myös lapsiin panostetaan sekä aikaa että rahaa. Nämä ovat siis erittäin hyviä ja kannatettavia asioita! Taloustieteilijät lienevät melko yksimielisiä siitä, että taloudellinen eriarvoisuus ei käytännössä ole ongelma, jos kaikki vaurastuvat, vaikka osa vaurastuisi enemmän. Se on jopa suotavaa.</p>
<p>Taloudellinen eriarvoisuus on yhteiskunnallinen haitta, jos se aiheuttaa pysyvää huono-osaisuutta ja rikkaiden monopolivoimaa poliittisella kentällä. Tällaisia merkkejä on jo olemassa ja Branko Milanovićin mielestä se on pitkällä aikavälillä liberaalin meritokraattisen kapitalismin suurimpia uhkia. Yhdysvalloissa kaikkein rikkaimmat voivat vaikuttaa politiikkaan heitä hyödyttävällä tavalla. Vuoden 2016 vaalikampanjan lahjoituksista peräti 40 prosenttia toteutti rikkaimman prosentin ylin prosentti (ei ole typo). Se tuskin oli pelkkää hyväntekeväisyyttä. Myös koulutus on eriytynyttä, eikä keskiluokalla tahdo olla enää varaa kouluttaa lapsiaan. Yhdysvaltojen parhaimpiin korkeakouluihin saapuu enemmän opiskelijoita tulonjaon ylimmästä prosentista kuin koko alimmasta 60 prosentista. Vaurauden lisäämiseksi Milanović esittää muun muassa kansankapitalismia, jossa pieni- ja keskituloisia verohelpotuksin houkuteltaisiin omistamaan enemmän. Tämä ei kuitenkaan Milanovićin mukaan riitä. Hän kannattaa tinkimättömästi perintöveroa, joka hänen mielestään olisi omiaan parantamaan yhteiskunnissa mahdollisuuksien tasa-arvoa.</p>
<p>Milanovićin verotukselliset ideat eivät ole uusia, eikä siten miellytä monia, varsinkaan Yhdysvalloissa. Maan historia ja individualistiset ihanteet, kuten self-made man -myytti, ovat olleet Yhdysvalloissa laissez-faire kapitalismiin ja yrittäjyyteen kannustava tekijä, jotka ovat osaltaan synnyttäneet amerikkalaiseen yhteiskuntaan ulospäinsuuntautuneen, kunnianhimoisen ja periksiantamattomuuden identiteetin. Toisaalta ihanteet ja myytit ovat myös osa Yhdysvaltalaisen kahtiajakautumisen vuosisataista jatkumoa. Historialliset pelot vapauksien menettämisestä ovat luoneet vastakkainasettelun siitä, kuinka pitkälle valtion käsi voi ulottua ihmisten elämään ja taskuihin. Osa haluaisi parantaa menestymisen mahdollisuuksia kasvattamalla valtion roolia erilaisten palveluiden ja etuuksien maksajana, toisten mielestä jo nykyinenkin järjestelmä puuttuu liiaksi heidän perustuslaillisiin ja itsenäisyysjulistuksen lupaamiin vapauksiin. Valtion kontrollin lisääminen voi osan mielestä johtaa noidankehään kohti tyranniaa. Molemmat ovat argumentoituja tulkintoja. Kaikesta huolimatta ilman kunnollista tukiverkkoa valtava taloudellinen eriarvoisuus supistaa huono-osaisten menestymismahdollisuuksia Yhdysvalloissa.</p>
<p>Toisin kuin amerikkalainen järjestelmä, Suomen pohjoismainen hyvinvointivaltiomalli pyrkii tukemaan menestymistä kollektiivisesti. Yhteiskunnan sosiaalista mobiliteettia mittaava The Global Social Mobility Index rankkaa Suomen kolmanneksi tasapisteisiin Norjan kanssa. Viiden parhaan joukkoon pääsevät kaikki Pohjoismaat. Suomessa sosiaalinen mobiliteetti luokkien välillä on edelleen mahdollista ja epäonnistenkin on mahdollista menestyä. Näköpiirissä on silti haasteita. Korkeasti kehittyneelle hyvinvointivaltiolle globalisaatio, ikääntyvä väestö, maaseudun näivettyminen ja laajemmassa mitassa mahdollinen matalan koulutustason omaavien ihmisten maahanmuutto on vaikea yhtälö ratkaistavaksi. Varallisuuserot ovat jo kasvaneet. Suomessa viimeisen kolmenkymmenen vuoden aikana varakkain kymmenys on kasvattanut varallisuuttaan, mutta vähävaraisin 50 prosenttia ei sitä ole juurikaan tehnyt. Myös keskiluokan varallisuuden kasvu on ollut viime vuosikymmenellä heikkoa. Vähävaraisimman varallisuus on pääsääntöisesti kiinni asunnoissa ja niiden arvo on laskenut. Rikkaimmilla on monipuolisemmin rahoitusvarallisuutta, joka on tuottanut kasvua. Varallisuuserojen kasvaessa pitkän aikavälin vaarana on, että huono-osaisuus kasautuu, yhteiskunnalliset palvelut köyhempien ja rikkaimpien välillä eriytyvät, kansalaisten luottamus instituutioihin ja kanssaihmisiin rapautuu ja rikkaimpien halu osallistua yhä kasvavien yhteisten palvelujen maksajina heikkenee. Näitä ajatuksia on jo havaittavissa muun muassa Anu Kantolan ja Hanna Kuuselan *Huipputuloiset-*kirjassa esitetyissä mielipiteissä ja sosiaalisen median keskusteluissa nettoveronmaksajista ja -saajista.</p>
<p>Kapitalismi luo vaurautta, mutta kapitalismiin sisäsyntyisesti kuuluva eriarvoisuuskehitys tarvitsee kollektiivisen turvaverkon epäonnisten varalle sekä uudenlaisia poliittisia ratkaisuja, jotta mahdollisimman monella olisi paremmat mahdollisuudet menestyä, erityisesti Yhdysvalloissa. Suomessa uudet kansankapitalistiset avaukset, kuten hyvin menestynyt osakesäästötili tai ajatukset sen asettamisesta osaksi äitiyspakkausta voisivat olla kuin Branko Milanovićin kynästä. Niiden soisi kannustavan suomalaiset pois lottokansan perinteestä, joka olisi omiaan kasvattamaan pieni- ja keskituloisten varallisuutta. Samalla on pohdittava, kuinka pidämme yhteiskunnassa mahdollisimman monet mukana, niin että verotus pysyisi kaikkien kannalta hyväksyttävyyden rajoissa. Vuosikymmenen pituista heikkoa talouskasvua Suomella ei ole mahdollisuutta enää pitkittää. Luottamus instituutioihin ja kanssaihmisiin on jatkossakin kansakuntien yhteinen etu.</p>



<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">Mikael Hernesniemi 2023</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>