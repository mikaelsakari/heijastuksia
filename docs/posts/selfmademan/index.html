<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="">
<meta name="dcterms.date" content="2021-04-04">

<title>◀◀◀ - Eriarvoisuuden ja köyhyyden kehitys Venäjällä ja entisissä itäblokin maissa</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">◀◀◀</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">？</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/mikaelsakari" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://instagram.com/mikaelhernesniemi" rel="" target=""><i class="bi bi-instagram" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mikaelsakari" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Eriarvoisuuden ja köyhyyden kehitys Venäjällä ja entisissä itäblokin maissa</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Analyysi</div>
                <div class="quarto-category">Eriarvoisuus</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 4, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="johdanto" class="level3">
<h3 class="anchored" data-anchor-id="johdanto">Johdanto</h3>
<p>Berliinin muurin murtuminen vuonna 1989 ja Neuvostoliiton romahtaminen vuonna 1991 johti itäblokin maiden (uudelleen)itsenäistymisiin. Sitä seuranneet vuodet merkitsivät käännekohtaa, kun maat siirtyivät keskitetystä suunnitelmataloudesta markkinatalouteen. Maiden talouksia, joita rasittivat vanhentuneet teolliset rakenteet, vaativat radikaalia uudistusta, joten hallitukset aloittivat toimenpiteitä nopeuttaakseen siirtymää, käytäntöä, jota nimitettiin myös “shokkiterapiaksi”. Siirtymätalouksissa tulonsiirtoja lakkautettiin, hintasäännöstelyä vapautettiin, palkankorotuksia jäädytettiin, valtion investointeja vähennettiin ja veroja nostettiin. Myös aiemmin valtion holhouksessa olleet teollisuudenalat joutuivat markkinavoimien kouriin. Shokkiterapian vaikutukset olivat nopeita: työttömyys kasvoi ja kilpailukyvyttömät yritykset romahtivat. Vaikutukset heijastuivat koko yhteiskuntaan. Valtion tarjoamat sosiaaliset turvaverkot, joihin monet olivat luottaneet, romahtivat, joka synnytti kansalaisissa epävarmuutta ja ahdistusta. Tämä ajanjakso ei muuttanut ainoastaan maiden taloutta vaan myös yhteiskuntaa. Uusi järjestelmä loi uusia mahdollisuuksia haastaen samalla vakiintuneet normit. Edistyksen lupausten keskellä oli kuitenkin eriarvoisuuden ja epäluottamuksen varjoja, jotka loivat pohjan 2000-luvun yhteiskunnalliselle kehitykselle. Monet lopulta kokivat, että shokkiterapiassa oli ollut liikaa shokkia ja liian vähän terapiaa.</p>
<p>Tässä esseessä tarkastelen Venäjän ja itäblokin maiden eriarvoisuuskehitystä ja köyhyyttä vuosien 1989–2020 välillä vertaillen niitä keskenään. Aineistona käytän World Income Inequality Databasen dataa ja erinomaisesta Our World in Data -sivustolta löytyvää aineistoa. Lisäksi olen käyttänyt analysoinnin tukena Euroopan jälleenrakennus- ja kehityspankki (EBRD) vuosittain ilmestyvää siirtymätalouksien raportteja.</p>
</section>
<section id="eriarvoisuus-venäjällä-ja-entisissä-itäblokin-maissa" class="level3">
<h3 class="anchored" data-anchor-id="eriarvoisuus-venäjällä-ja-entisissä-itäblokin-maissa">Eriarvoisuus Venäjällä ja entisissä itäblokin maissa</h3>
<p>Venäjällä, entisissä itäblokin maissa ja monissa muissakin entisen Neuvostoliiton alueilla eriarvoisuus lisääntyi voimakkaasti siirtymäkauden ensimmäisen vuosikymmenen aikana. Talouskasvu oli hidasta ensimmäisten vuosien aikana, minkä seurauksena keskimääräiset tulot jäivät paljon alle siirtymävaihetta edeltäneen tason. Esimerkiksi Venäjällä, ennen Neuvostoliiton romahdusta, ainoastaan suurituloisin kymmenes pystyi radikaalisti kasvattamaan tulojaan, mutta Neuvostoliiton romahduksen jälkeen ja siirtymävaiheen aikana tulojen romahdus oli sitäkin suurempi. Jokaisessa maassa ja jokaisessa tulodesiilissä ihmisten tulot romahtivat katastrofaalisesti, erityisesti mitä pienituloisempaan joukkoon kuului. Kuten <em>kuvasta 1</em> voimme nähdä, Venäjällä vuosien 1988–1996 välillä viidennen tulodesiilin keskimääräiset tulot tippuivat noin 60 % ja kaikkein pienituloisimmilla jopa lähes 90 %.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Inequality.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Kuva 1</figcaption>
</figure>
</div>
<p><em>Kuvasta 1</em> voimme myös havaita, että siirtymävaiheen vaikutukset olivat yleisesti samankaltaisia kaikissa maissa, vaikka entisissä itäblokin maissa keskimääräisten tulojen lasku ei ollut aivan yhtä dramaattinen kuin Venäjällä. Silti jokaisen tulodesiilin keskimääräiset tulot enemmän tai vähemmän romahtivat. Bulgariassa talouden radikaali uudistus aloitettiin muita maita myöhemmin. Siellä suurituloisin kymmenys kasvatti tulotasoaan 1990-luvun ensimmäisellä puoliskolla, mutta vuonna 1996, kun talousuudistukset alkoivat, myös kaikkein suurituloisimman väestönosan tulot romahtivat. Kun siirtymävaiheen uudistukset olivat jonkin aikaa vaikuttaneet, useat maat pystyivät kasvattamaan keskimääräisiä tulotasojaan jokaisella desiilitasolla. Ainoastaan Romaniassa ja Bulgariassa köyhimmän tulodesiilin tulot jämähtivät paikoilleen, ja tämä on kasvattanut maiden tuloeroja jo vuosia.</p>
<p>Gini-indeksillä mitattuna (<em>kuva 1: musta katkoviiva</em>) eriarvoisuuden kehitys on myös samankaltainen jokaisessa siirtymävaiheen maissa. Jokaisessa maassa eriarvoisuus lähti välittömästi kasvuun, vaikkakin suhteellisia eroja löytyy. Esimerkiksi Venäjällä tuloerot kasvoivat räjähdysmäisesti. Ennen siirtymävaihetta Venäjän Gini-kerroin oli noin 30 %, mutta kasvoivat Neuvostoliiton romahduksen jälkeen siirtymävaiheessa suurimmilleen 53 prosenttiin vuonna 1993. Tämän jälkeen taloudellinen eriarvoisuus tippui jyrkästi vuoteen 2007 saakka, jolloin ne stabilisoituivat melko korkealle tasolle, noin 35 %:iin.</p>
<p>Entisissä itäblokin maissa taloudellinen eriarvoisuus myös kasvoi, mutta Puolassa, Tšekissä ja Unkarissa maltillisemmin kuin Romaniassa ja Bulgariassa. Näissä niin sanotuissa Visegrad-maissa eriarvoisuus on siirtymävaiheen jälkeen stabiloitunut tai lähtenyt jopa laskuun. Kuten <em>kuvasta 2</em> voimme nähdä jokaisessa maassa kaikista suurituloisin kymmenys kasvattivat suhteellista osuuttaan muihin tulodesiileihin verrattuna. Venäjällä rikkain kymmenes kasvattivat suhteellista osuuttaan siirtymävaiheen alussa, kunnes heidän osuus romahti lähes 20 %-yksiköllä. Romaniassa siirtymävaiheen uudistukset johtivat rikkaimman kymmenyksen osuuden kasvamiseen jopa pitkälle 2000-luvun lopulle saakka, kunnes nousu pysähtyi ja eriarvoisuus kääntyi laskuun. Bulgariassa rikkain kymmenes on kasvattanut suhteellista osuuttaan taloudesta 2000-luvun puolivälistä saakka ja taloudellinen eriarvoisuus on jatkanut kasvuaan näihin vuosiin saakka. Romaniassa ja Bulgariassa alimmat desiilit ovat menettänyt suhteellista osuuttaan taloudesta rikkaimpien kustannuksella, joka on kasvattanut maissa eriarvoisuutta.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/inequality_2.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Kuva 2</figcaption>
</figure>
</div>
<p>Kuten <em>kuvasta 2</em> voimme havaita, talous koki valtavan kolauksen, kun maat siirtyivät kommunistisesta talousjärjestelmästä kapitalismiin. Venäjällä asukaskohtainen bruttokansantuote suorastaan romahti (<em>kuva 2: musta katkoviiva</em>). Mielenkiintoista on, että Puolassa ja Unkarissa bruttokansantuotteella mitattuna siirtymävaiheen vaikutus oli maltillinen, kun Bulgariassa, Romaniassa ja erityisesti Venäjällä se oli pitkäaikainen ja syvä. Joka tapauksessa uudistusten myötä bruttokansantuote lähti ennemmin tai myöhemmin nopeaan nousuun: Puolassa, Unkarissa ja Tšekeissä nopeammin kuin muissa maissa. Euroopan jälleenrakennus- ja kehityspankin (ERDB) raporttien mukaan nämä olivatkin maita, jotka olivat uudistusohjelmien parhaita suorittajia, joissa mitattiin liberalisaation, yksityistämisen, yritysten, infrastruktuurin, finanssi-instituutioiden ja oikeudellisen ympäristön tilaa. Muutosohjelmien hyvä toteuttaminen herätti luottoa myös kansainvälisesti. Teollisuuden tuotanto ja tuottavuus sekä ulkomaiset investoinnit kasvoivat muita siirtymämaita nopeammin, jotka mahdollistivat kestävämmän talouskasvun.</p>
<p>Verotuksella on suuri vaikutus maiden Gini-indeksiin, kuten voimme havaita <em>kuvasta 3</em><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Näemme, että verojen ja etuuksien jälkeen eriarvoisuus vähenee huomattavasti. Kuitenkin maiden hallitusten verojen ja etuuksien avulla toteuttaman uudelleenjaon laajuudessa on suuria eroja. Bulgariassa ja Venäjällä verojen vaikutus laskee Gini-indeksiä noin 25 %. Romaniassa veron vaikutus jää noin 33 prosenttiin. Tšekeissä, Unkarissa, Puolassa verot pienentävät Gini-indeksiä jopa noin 40 %.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/inequality_tax-02.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Kuva 3</figcaption>
</figure>
</div>
</section>
<section id="köyhyys" class="level3">
<h3 class="anchored" data-anchor-id="köyhyys">Köyhyys</h3>
<p>Negatiivinen yhdistelmä keskimääräisten tulojen laskua ja eriarvoisuuden kasvua johti kotitalouksien köyhyyden dramaattiseen lisääntymiseen. Kuten <em>kuvasta 4</em> voimme nähdä, ihmisiä putosi jopa äärimmäiseen köyhyyteen (alle 2,15 $) siirtymävaiheen aikana. Suhteellisesti kaikista dramaattisin köyhyyden lisääntyminen tapahtui Romaniassa, jossa jopa 8 % väestöstä eli äärimmäisessä köyhyydessä 1990-luvun alussa. Bulgariassa, ja ajoittain Romaniassakin, äärimmäinen köyhyys on ollut pysyvä asiaintila 1990-luvulta saakka. Kuten saatamme havaita ainoastaan Tšekeissä äärimmäistä köyhyyttä ei juurikaan esiintynyt. Joka tapauksessa siirtymävaihe oli dramaattinen muutos ihmisten elämään. Venäjällä tämä tarkoitti pahimmillaan sitä, että lähes seitsemän miljoonaa ihmistä, Romaniassa kaksi miljoonaa ja Puolassa miljoona ihmistä eli äärimmäisessä köyhyydessä; todellisuudessa, jolle on ominaista ihmisten perustarpeiden, kuten ruoan, puhtaan juomaveden, sanitaation, terveydenhuollon, suojan, koulutuksen ja tiedon puute.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/poverty.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Kuva 4</figcaption>
</figure>
</div>
<p>Jos mahdollista, tilanne oli vieläkin karumpi, jos tarkastelemme Maailmanpankin alemman keskitulotason maihin käytettyä köyhyyden raja-arvoa, joka on 3,65 dollaria päivässä. Kun otan kynnykseksi vuoden 1995, jolloin kaikki tarkastelussa olevat maat luokiteltiin alemman keskitulotason maiksi, niin tällöin <a href="https://ourworldindata.org/explorers/poverty-explorer?tab=chart&amp;time=1989..latest&amp;facet=entity&amp;country=POL~RUS~HUN~CZE~ROU~BGR&amp;pickerSort=desc&amp;pickerMetric=headcount_ratio_365&amp;Indicator=Share+in+poverty&amp;Poverty+line=%243.65+per+day%3A+Lower-middle+income+poverty+line&amp;Household+survey+data+type=Show+data+from+both+income+and+consumption+surveys&amp;Show+breaks+between+less+comparable+surveys=false" title="Share of population living on less than $3.65 a day, 1989 to 2020">Maailmanpankin datan mukaan</a> Venäjällä pahimmillaan yli 15 %, Puolassa yli 20 % ja Romaniassa jopa lähes puolet väestöstä eli alle 3,85 $ päivässä. Vuoteen 2005 tultaessa kaikki maat olivat nousseet ylemmän keskitulotason maiksi, mutta monessa maassa köyhyys oli alati läsnä.</p>
</section>
<section id="lopuksi" class="level3">
<h3 class="anchored" data-anchor-id="lopuksi">Lopuksi</h3>
<p>On selvää, etteivät ihmisten toiveet markkinatalouden auvoisuudesta eivät käyneet kaikilla toteen. Ne ihmiset, jotka odottivat laajaa tavaroiden saatavuutta ja taloudellista turvallisuutta, valitettavasti kohtasivat todellisen köyhyyden ja valtavat eriarvoisuuden muodot ensimmäistä kertaa elämässään. Ne, jotka kamppailivat perustarpeiden, kuten ruoan, asumisen ja terveydenhuollon kanssa, kuuluivat yleensä niihin yhteiskunnan osiin, jotka eivät ole hyötyneet 1990-luvun taloudellisista ja poliittisista muutoksista. Monet ihmiset vertasivat nykyisyyttä menneeseen ja joutuivat pettymään. Kun aikaisemmin sosialistinen järjestelmä korvasi alhaiset tulot sosiaalisilla turvaverkoilla, jotka tarjosivat ilmaista koulutusta, pääsyn kulttuuritapahtumiin ja sairaanhoitoa, niin sitä ei enää ollutkaan saatavilla samalla tavalla. Aikakauden seuraukset ovat syvällisiä. Vaikka talouden uudistaminen oli välttämätöntä edistyksen kannalta, se ei tullut ilman hintaa. Se jätti pysyviä jälkiä maan sosiaaliseen, taloudelliseen ja kulttuuriseen identiteettiin, jotka näkyvät monessa siirtymätalouden maassa tänäkin päivänä.</p>
</section>
<section id="lähteet" class="level3">
<h3 class="anchored" data-anchor-id="lähteet">Lähteet</h3>
<p>European Bank for Reconstruction and Development (2000). Transition report 2000 - Employment, skills and transition. https://www.ebrd.com/publications/transition-report-2000-english.pdf</p>
<p>Our World in Data. Poverty. https://ourworldindata.org/search?q=poverty</p>
<p>World Income Inequality Database. https://www.wider.unu.edu/database/world-income-inequality-database-wiid#WIIDcomp</p>
<p>Footnotes Tiedot on haettu Our World in Data -sivustolta.↩︎</p>
<p>Our World in Data.↩︎</p>


</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Joe Hasell, Pablo Arriagada, Esteban Ortiz-Ospina and Max Roser (2023) - “Economic Inequality” Published online at OurWorldInData.org. Retrieved from: ’<a href="https://ourworldindata.org/economic-inequality'">https://ourworldindata.org/economic-inequality’</a> [Online Resource]<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">Mikael Hernesniemi 2023</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>